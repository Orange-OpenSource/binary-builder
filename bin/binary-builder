#!/usr/bin/env ruby

$LOAD_PATH.unshift(File.expand_path('../../lib', __FILE__))
require 'builder'
require 'optparse'


options = {}
optparser = OptionParser.new do |opts|
  opts.banner = "USAGE: binary-builder [options]"

  opts.on("-nNAME","--name=NAME", "Name of the binary e.g. nginx",:REQUIRED) do |n|
    options[:binary_name] = n
  end
  opts.on( "-vVERSION","--version=VERSION", "Version of the binary e.g. 1.7.11",:REQUIRED) do |n|
    options[:binary_version] = n
  end
  opts.on("-cCHECKSUM","--checksum=CHECKSUM", "Checksum of the binary e.g. abc123",:REQUIRED) do |n|
    options[:checksum_value] = n
  end
end
optparser.parse!

raise optparser.help unless options.keys.sort == [:binary_name, :binary_version, :checksum_value]

BinaryBuilder::Builder.build(options)
